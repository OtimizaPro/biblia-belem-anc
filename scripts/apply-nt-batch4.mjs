#!/usr/bin/env node
/**
 * Batch NT Translation - Lote 4
 * Aplica traduções literais para palavras gregas freq 5-7 no NT
 */
import { execSync } from 'child_process';
const DB = 'biblia-belem';
const translations = [
  // freq 7
  ["ἰχθύας", "peixes"],
  ["ἰδίῳ", "próprio"],
  ["ἰδίων", "próprios"],
  ["Ἡλείαν", "Elias"],
  ["ἦλθαν", "vieram"],
  ["ἥξει", "virá"],
  ["ἥμαρτον", "pecaram"],
  ["ἤγγισεν", "aproximou-se"],
  ["ἤγαγεν", "conduziu"],
  ["ἠρώτων", "perguntavam"],
  ["ἔχεις", "tens"],
  ["ἔφυγον", "fugiram"],
  ["ἔστησεν", "estabeleceu"],
  ["ἔπαινον", "louvor"],
  ["ἔθνει", "nação"],
  ["ἔθηκαν", "puseram"],
  ["ἔθετο", "pôs"],
  ["ἔβαλον", "lançaram"],
  ["ἓξ", "seis"],
  ["ἑορτῇ", "festa"],
  ["ἑκάστου", "cada-um"],
  ["ἐσταύρωσαν", "crucificaram"],
  ["ἐρῶ", "direi"],
  ["ἐροῦμεν", "diremos"],
  ["ἐπιστεύσατε", "crestes"],
  ["ἐπιγνώσει", "conhecimento-pleno"],
  ["ἐπηρώτησαν", "perguntaram"],
  ["ἐπείνασεν", "teve-fome"],
  ["ἐξέβαλον", "expulsaram"],
  ["ἐνέργειαν", "operação"],
  ["ἐλογίσθη", "foi-contado"],
  ["ἐλεημοσύνην", "esmola"],
  ["ἐλήλυθεν", "tem-vindo"],
  ["ἐλήλυθα", "tenho-vindo"],
  ["ἐλάβομεν", "recebemos"],
  ["ἐκτείνας", "estendendo"],
  ["ἐκλήθητε", "fostes-chamados"],
  ["ἐκλήθη", "foi-chamado"],
  ["ἐκεῖνός", "aquele"],
  ["ἐθαύμαζον", "admiravam-se"],
  ["ἐζήτει", "buscava"],
  ["ἐγεννήθη", "foi-gerado"],
  ["ἐγενήθημεν", "tornamo-nos"],
  ["ἐγείρεται", "é-levantado"],
  ["Ἀσπάσασθε", "Saudai"],
  ["Ἀσίας", "Ásia"],
  ["Ἀναστὰς", "Levantando-se"],
  ["Ἀκολούθει", "Segue"],
  ["Ἀδελφοί", "Irmãos"],
  ["ἄρτων", "pães"],
  ["ἄξιον", "digno"],
  ["ἁμαρτίᾳ", "pecado"],
  ["ἀτενίσας", "fitando-os-olhos"],
  ["ἀρχὴν", "início"],
  ["ἀργύριον", "prata"],
  ["ἀργύρια", "moedas-de-prata"],
  ["ἀπώλειαν", "perdição"],
  ["ἀπόληται", "pereça"],
  ["ἀποστέλλω", "envio"],
  ["ἀπολέσῃ", "destrua"],
  ["ἀπολέσαι", "destruir"],
  ["ἀποκριθέντες", "respondendo"],
  ["ἀποκάλυψιν", "revelação"],
  ["ἀποδώσει", "retribuirá"],
  ["ἀπήγαγον", "levaram-embora"],
  ["ἀπέστειλας", "enviaste"],
  ["ἀνδράσιν", "homens"],
  ["ἀναστῆναι", "levantar-se"],
  ["ἀμφότεροι", "ambos"],
  ["ἀκουέτω", "ouça"],
  ["ἀδελφὴ", "irmã"],
  ["ἀγροῦ", "campo"],
  ["ἀγροὺς", "campos"],
  ["ἀγαπητός", "amado"],
  ["ἀγαθῷ", "bom"],
  ["χαίρειν", "alegrar-se"],
  ["φανερὸν", "manifesto"],
  ["υἱός", "filho"],
  ["υἱοῖς", "filhos"],
  ["τραπέζης", "mesa"],
  ["τρίς", "três-vezes"],
  ["τράχηλον", "pescoço"],
  ["τινων", "alguns"],
  ["τιμῆς", "honra"],
  ["τηρεῖν", "guardar"],
  ["τελωνῶν", "cobradores-de-impostos"],
  ["τέλειον", "perfeito"],
  ["συνειδήσεως", "consciência"],
  ["συνεδρίῳ", "sinédrio"],
  ["συναγωγὰς", "sinagogas"],
  ["στήκετε", "permanecei-firmes"],
  ["σέσωκέν", "tem-salvo"],
  ["πᾶσι", "todos"],
  ["προσώπῳ", "face"],
  ["προσηύξατο", "orou"],
  ["προσήνεγκαν", "trouxeram"],
  ["πορευόμενοι", "indo"],
  ["πολλὴν", "muita"],
  ["ποιῆτε", "façais"],
  ["ποιοῦντες", "fazendo"],
  ["ποικίλαις", "diversas"],
  ["ποιήσωμεν", "façamos"],
  ["πιστεύεις", "crês"],
  ["περιπάτει", "anda"],
  ["περιεπάτει", "andava"],
  ["πειρασμόν", "tentação"],
  ["παραστῆσαι", "apresentar"],
  ["παρακλήσει", "consolação"],
  ["παραδώσουσιν", "entregarão"],
  ["παραδώσει", "entregará"],
  ["παραδίδοται", "é-entregue"],
  ["παράκλησιν", "consolação"],
  ["πανταχοῦ", "por-toda-parte"],
  ["παθημάτων", "sofrimentos"],
  ["πέμψαντός", "que-enviou"],
  ["πάσαις", "todas"],
  ["οὐράνιος", "celestial"],
  ["οἰκουμένην", "mundo-habitado"],
  ["μόνῳ", "somente"],
  ["μόλις", "dificilmente"],
  ["μνημονεύετε", "lembrai-vos"],
  ["μιᾷ", "uma"],
  ["μισεῖ", "odeia"],
  ["μηδεμίαν", "nenhuma"],
  ["μείζονα", "maior"],
  ["μαρτυρῶ", "testemunho"],
  ["μαρτυρεῖ", "testifica"],
  ["μαθητής", "discípulo"],
  ["μένων", "permanecendo"],
  ["μέλει", "importa"],
  ["λαλοῦντες", "falando"],
  ["λήμψεται", "receberá"],
  ["κἀκεῖνοι", "e-aqueles"],
  ["κτίσις", "criação"],
  ["κρίσει", "juízo"],
  ["κρίνω", "julgo"],
  ["κοινωνίαν", "comunhão"],
  ["κοινωνία", "comunhão"],
  ["κοιλίας", "ventre"],
  ["κληρονομίαν", "herança"],
  ["κλασμάτων", "pedaços"],
  ["καταβαῖνον", "descendo"],
  ["καρπὸς", "fruto"],
  ["καλῶν", "boas"],
  ["καλὰ", "boas"],
  ["θλῖψις", "tribulação"],
  ["θέλομεν", "queremos"],
  ["ζῶμεν", "vivamos"],
  ["εὐωνύμων", "esquerda"],
  ["εὐχαριστῶ", "dou-graças"],
  ["εὐσέβειαν", "piedade"],
  ["εὐαγγελιζόμενοι", "evangelizando"],
  ["εἶδαν", "viram"],
  ["εἴπω", "diga"],
  ["εἴπητε", "digais"],
  ["εἱστήκει", "estava-de-pé"],
  ["δὸς", "dá"],
  ["δουλεύειν", "servir"],
  ["διδάσκεις", "ensinas"],
  ["διακονίας", "ministério"],
  ["διακονία", "ministério"],
  ["διαθήκη", "aliança"],
  ["διάκονοι", "servos"],
  ["δεῦρο", "vem"],
  ["δέσμιος", "prisioneiro"],
  ["γόνατα", "joelhos"],
  ["γυναῖκες", "mulheres"],
  ["γλώσσῃ", "língua"],
  ["γινώσκεις", "conheces"],
  ["γινέσθω", "seja"],
  ["γενομένου", "tendo-acontecido"],
  ["γαστρὶ", "ventre"],
  ["γένησθε", "torneis-vos"],
  ["βρυγμὸς", "ranger"],
  ["βασιλεῦ", "rei"],
  ["αἴρει", "levanta"],
  ["Φῆστος", "Festo"],
  ["Φιλίππου", "Filipe"],
  ["Σίμωνι", "Simão"],
  ["Ποῦ", "Onde"],
  ["Πορευθέντες", "Tendo-ido"],
  ["Πειλᾶτον", "Pilatos"],
  ["Οὔ", "Não"],
  ["Μαρίας", "Maria"],
  ["Μακεδονίας", "Macedônia"],
  ["Καίσαρα", "César"],
  ["Βεελζεβοὺλ", "Belzebu"],
  // freq 6
  ["ῥημάτων", "palavras"],
  ["ῥήματος", "palavra"],
  ["ᾐτήσατο", "pediu"],
  ["ὑπερβολὴν", "excesso"],
  ["ὑπήντησεν", "encontrou"],
  ["ὑπέστρεψεν", "retornou"],
  ["ὑπάρχοντες", "existindo"],
  ["ὑπάρχειν", "existir"],
  ["ὑγιὴς", "são"],
  ["Ὅτε", "Quando"],
  ["ὅλῳ", "todo"],
  ["ὄψονται", "verão"],
  ["ὄντων", "existindo"],
];
let success = 0;
let errors = 0;
let totalUpdated = 0;
console.log(`\n=== Tradução NT - Lote 4 ===`);
console.log(`Palavras a traduzir: ${translations.length}`);
console.log(`Início: ${new Date().toLocaleString('pt-BR')}\n`);
for (const [word, translation] of translations) {
  try {
    const escapedWord = word.replace(/'/g, "''");
    const escapedTranslation = translation.replace(/'/g, "''");
    const sql = `UPDATE tokens SET pt_literal = '${escapedTranslation}' WHERE text_utf8 = '${escapedWord}' AND pt_literal LIKE '[%]';`;
    const result = execSync(
      `npx wrangler d1 execute ${DB} --remote --command "${sql}" --json`,
      { encoding: 'utf-8', timeout: 30000 }
    );
    const parsed = JSON.parse(result);
    const changes = parsed[0]?.meta?.changes || 0;
    totalUpdated += changes;
    if (changes > 0) {
      process.stdout.write(`✓ ${word} → ${translation} (${changes})\n`);
    } else {
      process.stdout.write(`· ${word} → ${translation} (0)\n`);
    }
    success++;
  } catch (err) {
    process.stdout.write(`✗ ${word} → ${translation} (ERRO)\n`);
    errors++;
  }
}
console.log(`\n=== Resultado Lote 4 ===`);
console.log(`Sucesso: ${success}/${translations.length}`);
console.log(`Erros: ${errors}`);
console.log(`Tokens atualizados: ${totalUpdated}`);
console.log(`Fim: ${new Date().toLocaleString('pt-BR')}\n`);
